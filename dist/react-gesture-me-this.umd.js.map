{"version":3,"file":"react-gesture-me-this.umd.js","sources":["../node_modules/gesture-me-this/dist/gesture-me-this.es.js","../src/index.ts"],"sourcesContent":["class r {\n  constructor(t, i) {\n    this.x = t, this.y = i;\n  }\n  add(t, i = new r(0, 0)) {\n    return i.x = this.x + t.x, i.y = this.y + t.y, i;\n  }\n  add_assign(t) {\n    return this.add(t, this);\n  }\n  sub(t, i = new r(0, 0)) {\n    return i.x = this.x - t.x, i.y = this.y - t.y, i;\n  }\n  sub_assign(t) {\n    return this.sub(t, this);\n  }\n  mul(t, i = new r(0, 0)) {\n    return i.x = this.x * t, i.y = this.y * t, i;\n  }\n  mul_assign(t) {\n    return this.mul(t, this);\n  }\n  div(t, i = new r(0, 0)) {\n    return this.mul(1 / t, i);\n  }\n  div_assign(t) {\n    return this.mul_assign(1 / t);\n  }\n  neg(t = new r(0, 0)) {\n    return this.mul(-1, t);\n  }\n  neg_assign() {\n    return this.mul_assign(-1);\n  }\n  dot(t) {\n    return this.x * t.x + this.y * t.y;\n  }\n  cross(t) {\n    return this.x * t.y - this.y * t.x;\n  }\n  length_sq() {\n    return this.dot(this);\n  }\n  length() {\n    return Math.sqrt(this.length_sq());\n  }\n  normalise(t = new r(0, 0)) {\n    return this.mul(1 / this.length(), t);\n  }\n  normalise_assign() {\n    return this.mul_assign(1 / this.length());\n  }\n  copy_from(t) {\n    return this.x = t.x, this.y = t.y, this;\n  }\n  set(t, i) {\n    this.x = t, this.y = i;\n  }\n}\nclass m {\n  constructor() {\n    this.finger_count = 0, this.fingers = /* @__PURE__ */ new Map(), this.centroid = new r(0, 0);\n  }\n  // average_finger_direction(): Vector {\n  //   const average_direction = new Vector(0, 0);\n  //   if (this.finger_count > 1) {\n  //     for (const finger of this.fingers.values()) {\n  //       average_direction.add_assign(finger.position_delta);\n  //     }\n  //     average_direction.div_assign(this.finger_count);\n  //   }\n  //   return average_direction;\n  // }\n}\nclass f {\n  constructor(t, i) {\n    this.position_delta = new r(0, 0), this.centroid_direction = new r(0, 0), this.position = new r(t, i);\n  }\n  is_moving_toward_centroid() {\n    return this.position_delta.dot(this.centroid_direction) > 0;\n  }\n  /** Returns the angle around `point` that the finger moved in radians  */\n  angle_delta_around_point(t) {\n    const i = this.position.sub(this.position_delta).sub_assign(t).normalise_assign(), e = this.position.sub(t).normalise_assign();\n    return Math.acos(i.dot(e));\n  }\n}\nclass w {\n  constructor(t, i) {\n    this.element = t, this.metrics = new m();\n    const e = (s) => {\n      var o;\n      s.preventDefault(), this.initialise_touches(s.changedTouches), (o = i.on_start) == null || o.call(i, this.metrics, s);\n    }, c = (s) => {\n      var o;\n      s.preventDefault(), this.update_touches(s.changedTouches), (o = i.on_move) == null || o.call(i, this.metrics, s);\n    }, u = (s) => {\n      var o;\n      s.preventDefault(), this.remove_touches(s.changedTouches), (o = i.on_end) == null || o.call(i, this.metrics, s);\n    }, _ = (s) => {\n      var o;\n      s.preventDefault(), this.remove_all_touches(), (o = i.on_cancel) == null || o.call(i, this.metrics, s);\n    };\n    t.addEventListener(\"touchstart\", e), t.addEventListener(\"touchmove\", c), t.addEventListener(\"touchend\", u), t.addEventListener(\"touchcancel\", _), this.on_start = e, this.on_move = c, this.on_end = u, this.on_cancel = _;\n  }\n  /** Removes the touch event listeners from the element */\n  disableGestures() {\n    this.element.removeEventListener(\"touchstart\", this.on_start), this.element.removeEventListener(\"touchmove\", this.on_move), this.element.removeEventListener(\"touchmove\", this.on_end), this.element.removeEventListener(\"touchmove\", this.on_cancel);\n  }\n  initialise_touches(t) {\n    this.metrics.finger_count += t.length;\n    for (const i of t) {\n      const e = new f(i.clientX, i.clientY);\n      this.metrics.fingers.set(i.identifier, e);\n    }\n    this.calculate_centroid();\n  }\n  update_touches(t) {\n    for (const i of t) {\n      const e = this.metrics.fingers.get(i.identifier);\n      e && (e.position_delta.set(\n        i.clientX - e.position.x,\n        i.clientY - e.position.y\n      ), e.position.set(i.clientX, i.clientY));\n    }\n    this.calculate_centroid();\n  }\n  remove_touches(t) {\n    this.metrics.finger_count -= t.length;\n    for (const i of t)\n      this.metrics.fingers.delete(i.identifier);\n    this.calculate_centroid();\n  }\n  remove_all_touches() {\n    this.metrics.finger_count = 0, this.metrics.fingers.clear(), this.metrics.centroid.set(0, 0);\n  }\n  calculate_centroid() {\n    const { finger_count: t, fingers: i, centroid: e } = this.metrics;\n    e.set(0, 0);\n    for (const c of i.values())\n      e.add_assign(c.position);\n    t > 1 && e.div_assign(t);\n    for (const c of i.values())\n      e.sub(c.position, c.centroid_direction);\n  }\n}\nvar v = /* @__PURE__ */ ((n) => (n[n.Inward = 0] = \"Inward\", n[n.Outward = 1] = \"Outward\", n))(v || {});\nconst p = {\n  sensitivity: 0.5\n}, x = (n, t) => {\n  const { exact_finger_count: i, sensitivity: e = 0.5 } = t ?? p, c = !!i && n.finger_count === i || !i && n.finger_count > 1;\n  let u;\n  if (c) {\n    const _ = n.fingers.values();\n    let { value: s, done: o } = _.next(), l = s.is_moving_toward_centroid(), a = !0;\n    for (; !o && a; )\n      a = l === s.is_moving_toward_centroid(), { value: s, done: o } = _.next();\n    if (a) {\n      const g = l ? 0 : 1;\n      let h = 0;\n      for (const d of n.fingers.values())\n        h += d.position_delta.length();\n      h /= n.finger_count, h *= e, u = { strength: h, direction: g };\n    }\n  }\n  return u ? { is_recognised: !0, metrics: u } : { is_recognised: !1 };\n};\nexport {\n  f as Finger,\n  w as GestureController,\n  m as Metrics,\n  v as PinchDirection,\n  r as Vector,\n  x as pinch_zoom\n};\n//# sourceMappingURL=gesture-me-this.es.js.map\n","import React from \"react\";\nimport {\n  GestureController,\n  PinchMetrics,\n  TouchHandlers,\n  pinch_zoom,\n} from \"gesture-me-this\";\n\nexport type GestureHandlers = {\n  onPinch?(metrics: PinchMetrics): void;\n};\n\nexport function useGestures(handlers: GestureHandlers): React.Ref<HTMLElement> {\n  const ref = React.useRef(null);\n  let controller: GestureController | undefined;\n\n  React.useEffect(() => {\n    if (ref.current) {\n      const touchHandlers: TouchHandlers = {};\n\n      if (handlers.onPinch) {\n        touchHandlers.on_move = (metrics) => {\n          const result = pinch_zoom(metrics);\n          if (result.is_recognised) {\n            handlers.onPinch?.(result.metrics);\n          }\n        };\n      }\n\n      controller = new GestureController(ref.current, touchHandlers);\n    }\n\n    return () => {\n      controller?.disableGestures();\n    };\n  }, [ref]);\n\n  return ref;\n}\n"],"names":["i","f","e","w","s","o","_","x","n","l","a","g","h","d","useGestures","handlers","ref","React","controller","touchHandlers","metrics","result","pinch_zoom","_a","GestureController"],"mappings":"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","x_google_ignoreList":[0]}